#####################################
#events related to Georgian Missions#
#####################################

#Fate of Armenia-Direct integration, or release as March?
country_event = {
	id = flavor_geo.1
	title = "flavor_geo.EVTNAME1"
	desc = "flavor_geo.EVTDESC1"
	picture = RELIGIOUS_WARS_eventPicture
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "flavor_geo.EVTOPTA1"
		ai_chance = { factor = 0 }
		custom_tooltip = releasing_armenia_as_march
		hidden_effect = {
			every_owned_province = {
			    limit = {
                    area = samtskhe_area
                }
                remove_core = ARM
			}
			every_owned_province = {
			    limit = {
				    area = armenia_area
			    }
			    add_core = ARM
		    }
		    release = ARM
	     	ROOT = {
	        	create_subject = {
                    subject_type = georgian_protectorate
                    subject = ARM
		    	}
            }
		    ARM = {
		        capital_scope = {
				    build_to_forcelimit = {
					    infantry = 0.6
					    cavalry = 0.3
					    artillery = 0.1
				    }
			    }
			    change_government = monarchy
			    adopt_reform_progress = ROOT
			    add_historical_friend = root
				ROOT = { add_historical_friend = ARM }
		    }
		}
	}
	option = {
		name = "flavor_geo.EVTOPTB1"
		add_country_modifier = {
		    name = "geo_liberated_armenia"
		    duration = 5475
		}
		every_owned_province = {
		    limit = {
			    area = armenia_area
		    }
			add_nationalism = -20
        }			
	}
}
#Third Rome - Georgian version
country_event = {
	id = flavor_geo.2
	title = "flavor_geo.EVTNAME2"
	desc = "flavor_geo.EVTDESC2"
	picture = BYZANTINE_EMPEROR_eventPicture
	
	is_triggered_only = yes
	
	fire_only_once = yes

	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "flavor_geo.EVTOPTA2"
		trigger = {
			151 = {
				is_capital = no
			}
		}
		151 = {
			move_capital_effect = yes
			change_religion = ROOT
			change_culture = ROOT
			rename_capital = Konstantinopoli
			add_province_modifier = {
				name = "third_rome_modifier"
				duration = -1
			}
		}
		if = {
		    limit = { government = monarchy }
		    custom_tooltip = geo_enact_empire
		    hidden_effect = {	     
                remove_government_reform = georgian_monarchy_reform			
	            add_government_reform = georgian_empire_reform
	        }
	    }
        else = {
            set_government_rank = 3
        }				
	}
	option = {
		name = "flavor_geo.EVTOPTB2"
		capital_scope = {
			add_province_modifier = {
				name = "third_rome_modifier"
				duration = -1
			}
		}
		if = {
		    limit = { government = monarchy }
		    custom_tooltip = geo_enact_empire
		    hidden_effect = {	            
                remove_government_reform = georgian_monarchy_reform			
	            add_government_reform = georgian_empire_reform
	        }
	    }
        else = {
            set_government_rank = 3
        }
	}
}

#Sulkhan-Saba Orbeliani-Statesman

country_event = {
	id = flavor_geo.3
	title = "flavor_geo.EVTNAME3"
	desc = "flavor_geo.EVTDESC3"
	picture = ADVISOR_eventPicture
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "flavor_geo.EVTOPTA3"
		
		add_dip_power = 50
		define_advisor = {
			type = statesman
			religion = catholic
			name = "Sulkhan-Saba Orbeliani"
			discount = yes
     		location = 423
			skill = 2
		}
	}
	option = {
		name = "flavor_geo.EVTOPTB3"
		add_country_modifier = {
			name = "geo_sulkhan_saba_orbeliani"
			duration = 5475
		}
	}
}

#Catholicos-Patriarch Anton of Georgia-Theologian

country_event = {
	id = flavor_geo.4
	title = "flavor_geo.EVTNAME4"
	desc = "flavor_geo.EVTDESC4"
	picture = ADVISOR_eventPicture
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "flavor_geo.EVTOPTA4"
		
		add_adm_power = 50
		define_advisor = {
			type = philosopher
			name = "Anton Bagrationi"
			discount = yes
     		location = 2203
			skill = 2
		}
	}
	option = {
		name = "flavor_geo.EVTOPTB4"
		add_country_modifier = {
			name = "geo_patriarch_anton"
			duration = 5475
		}
	}
}

#Revolution is Near/Reference to Republic of Guria [now abroated and irrelevant]

#country_event = {
#	id = flavor_geo.5
#	title = "flavor_geo.EVTNAME5"
#	desc = "flavor_geo.EVTDESC5"
#	picture = REVOLUTION_eventPicture
#	
#	is_triggered_only = yes
#	
#	fire_only_once = yes
#	
#	mean_time_to_happen = {
#		days = 1
#	}
#	
#	option = {
#		name = "flavor_geo.EVTOPTA5"
#		
#		enact_revolution_effect = yes
#		add_country_modifier = {
#		    name = "geo_revolutionary_zeal"
#			duration = -1
#		}
#		add_prestige = 25
#		add_stability = -5
#	}
#	option = {
#		name = "flavor_geo.EVTOPTB5"
#		
#		add_stability_or_adm_power = yes
#	}
#	option = {
#		name = "flavor_geo.EVTOPTC5"
#		if = {
#		    limit = { NOT = { government = republic } }
#		    change_government_to_republic = yes
#	    }
#		add_government_reform = peasants_republic
#	    add_country_modifier = {
#		    name = "geo_revolutionary_zeal"
#			duration = -1
#		}
#		add_prestige = 25
#	}
#}

#Georgia conquers Crimea release Theodoro?

country_event = {
	id = flavor_geo.9
	title = "flavor_geo.EVTNAME9"
	desc = "flavor_geo.EVTDESC9"
	picture = CATHOLIC_RULERS_PRAYING_eventPicture
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "flavor_geo.EVTOPTA9"
		ai_chance = { factor = 50 }
		every_owned_province = {
		    limit = {
			    area = crimea_area
		    }
			add_core = FEO
			change_religion = orthodox
			change_culture = goths
        }
		if = {
		    limit = { FEO = { exists = no } }
			release = FEO
		}
		every_province = {
		    limit = {
			    area = crimea_area
		    }
			cede_province = FEO
        }
	 	ROOT = {
	    	create_subject = {
                subject_type = georgian_protectorate
                subject = FEO
			}
        }
		FEO = {
		     capital_scope = {
				 build_to_forcelimit = {
			        infantry = 0.6
				    cavalry = 0.3
				    artillery = 0.1
			    }
		    }
		    change_government = monarchy
			#check if one of the missions were completed
			adopt_government_reform = gothic_principality_reform
		    adopt_reform_progress = ROOT
		    add_historical_friend = root
			ROOT = { add_historical_friend = FEO }
	    }
	}
	option = {
		name = "flavor_geo.EVTOPTB9"
	
		ai_chance = { factor = 25 }
		every_province = {
		    limit = {
			    area = crimea_area
		    }
			add_core = FEO
			change_religion = orthodox
			change_culture = goths
        }
		if = {
		    limit = { FEO = { exists = no } }
			release = FEO
		}
		every_province = {
		    limit = {
			    area = crimea_area
		    }
			cede_province = FEO
        }
	 	ROOT = {
	    	create_subject = {
                subject_type = georgian_protectorate
                subject = FEO
			}
        }
		FEO = {
		     capital_scope = {
				 build_to_forcelimit = {
			        infantry = 0.6
				    cavalry = 0.3
				    artillery = 0.1
			    }
		    }
		    change_government = republic
			adopt_government_reform = gothic_republic_reform
		    adopt_reform_progress = ROOT
		    add_historical_friend = root
			ROOT = { add_historical_friend = FEO }
	    }
	}
	option = {
		name = "flavor_geo.EVTOPTC9"
	
		ai_chance = { factor = 25 }
		every_owned_province = {
		    limit = {
			    area = crimea_area
		    }
			change_religion = orthodox
			change_culture = goths
			add_base_production = 1
        }
	    add_accepted_culture_or_dip_power = { culture = gothic }
	}
}

#Georgia occupies the Crimean Khanate - Release Zaporozhians?

country_event = {
	id = flavor_geo.10
	title = "flavor_geo.EVTNAME10"
	desc = "flavor_geo.EVTDESC10"
	picture = COSSACK_ESTATE_RAIDERS_eventPicture
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "flavor_geo.EVTOPTA10"
		ai_chance = { factor = 75 }
		hidden_effect = {
		every_province = {
		    limit = {
			    area = zaporizhia_area
		    }
			add_core = ZAZ
			change_religion = orthodox
			change_culture = ruthenian
			add_province_modifier = {
				name = "geo_cossack_migrations"
				duration = 10800
			}
        }
		every_province = {
		    limit = {
			    area = yedisan_area
		    }
			add_core = ZAZ
			change_religion = orthodox
			change_culture = ruthenian
			add_province_modifier = {
				name = "geo_cossack_migrations"
				duration = 10800
			}
        }
		every_province = {
		    limit = {
			    area = azov_area
		    }
			add_core = ZAZ
			change_religion = orthodox
			change_culture = ruthenian
			add_province_modifier = {
				name = "geo_cossack_migrations"
				duration = 10800
			}
        }
		}
		if = {
		    limit = { ZAZ = { exists = no } }
			release = ZAZ
		}
		every_province = {
		    limit = {
				area = yedisan_area
		    }
			cede_province = ZAZ
        }
		every_province = {
		    limit = {
			    area = zaporizhia_area
		    }
			cede_province = ZAZ
        }
		every_province = {
		    limit = {
				area = azov_area
		    }
			cede_province = ZAZ
        }
		if = {
		    limit = { ZAZ = { NOT = { is_subject_of = ROOT } } }
			vassalize = ZAZ
		}
	 	ROOT = {
	    	create_subject = {
                subject_type = georgian_protectorate
                subject = ZAZ
			}
        }
		ZAZ = {
		     capital_scope = {
				 build_to_forcelimit = {
			        infantry = 0.6
				    cavalry = 0.3
				    artillery = 0.1
			    }
		    }
		    change_government = republic
			adopt_government_reform = cossacks_reform
			change_technology_group = eastern
		    adopt_reform_progress = ROOT
		    add_historical_friend = root
			ROOT = { add_historical_friend = ZAZ }
	    }
	}
	option = {
		name = "flavor_geo.EVTOPTB10"
	
		ai_chance = { factor = 25 }
		custom_tooltip = geo_conquered_crimea_and_kept
		every_province = {
		    limit = {
			    area = zaporizhia_area
		    }
			add_core = ZAZ
			change_religion = orthodox
			change_culture = ruthenian
			add_province_modifier = {
				name = "geo_cossack_migrations"
				duration = 10800
			}
        }
		every_province = {
		    limit = {
			    area = yedisan_area
		    }
			add_core = ZAZ
			change_religion = orthodox
			change_culture = ruthenian
			add_province_modifier = {
				name = "geo_cossack_migrations"
				duration = 10800
			}
        }
		every_province = {
		    limit = {
			    area = azov_area
		    }
			add_core = ZAZ
			change_religion = orthodox
			change_culture = ruthenian
			add_province_modifier = {
				name = "geo_cossack_migrations"
				duration = 10800
			}
        }
	    add_accepted_culture_or_dip_power = { culture = ruthenian }
	}
}

#Destruction of the Mameluks.

country_event = {
	id = flavor_geo.11
	title = "flavor_geo.EVTNAME11"
	desc = "flavor_geo.EVTDESC11"
	picture = COUNTRY_COLLAPSE_eventPicture
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "flavor_geo.EVTOPTA11"
		add_army_tradition = 25
		add_prestige = 50
		custom_tooltip = geo_crushed_slave_traders		
		add_country_modifier = {
	    	name = innovative_modifier
			duration = 3650
		}
		add_country_modifier = {
    		name = "the_abolish_slavery_act"
			duration = -1
		}
		hidden_effect = {
			every_owned_province = {
				limit = {
					trade_goods = slaves
				}
				change_trade_goods = unknown
				remove_building = tradecompany
				if = {
					limit = { has_province_modifier = slave_entrepot }
					remove_province_modifier = slave_entrepot
				}
			}
		}
		hidden_effect = {
	    	every_country = {
		        limit = {
		    	    is_subject_of = GEO
		        }
		        add_country_modifier = {
	             	name = innovative_modifier
		         	duration = 3650
		        }
	        	add_country_modifier = {
    	         	name = "the_abolish_slavery_act"
		        	duration = -1
	        	}
	        	custom_tooltip = abolished_slavery_act_tooltip
	    	    every_owned_province = {
		    	  	limit = {
			         	trade_goods = slaves
				    }
				    change_trade_goods = unknown
			        remove_building = tradecompany
				    if = {
				    	limit = { has_province_modifier = slave_entrepot }
				        remove_province_modifier = slave_entrepot
		        	}
		    	}
			}
        }
		
		MAM = {
		    change_government = monarchy
			remove_government_reform = mamluk_government
			if = {
			    limit = { religion_group = muslim }
			    adopt_government_reform = iqta
		    }
			else = {
			    adopt_government_reform = autocracy_reform
			}
			if = {
				limit = {
					has_regency = no
				}
				kill_ruler = yes
			}
			if = {
				limit = {
					has_heir = yes
				}
				kill_heir = {}
			}
			if = {
				limit = {
	    			has_consort = yes
				}
				remove_consort = yes
			}
		}		
	}
#######################Creation of the Protectorate of Egypt#######################
	option = {
		name = "flavor_geo.EVTOPTB11"
		custom_tooltip = geo_crushed_slave_traders	
		custom_tooltip = geo_release_egypt
		add_army_tradition = 25
		add_prestige = 50
		
		#####Establishing Protectorate#####
		hidden_effect = {
					every_province = {
	    	    limit = {
		    	    area = delta_area
		        }
	    		add_core = EGY
            }
			every_province = {
	    	    limit = {
		    	    area = cyrenaica_area
		        }
	    		add_core = EGY
            }
		    every_province = {
	    	    limit = {
		    	    area = al_wahat_area
		        }
	    		add_core = EGY
            }
			every_province = {
	    	    limit = {
		    	    area = said_area
		        }
	    		add_core = EGY
            }
			every_province = {
	    	    limit = {
		    	    area = vostani_area
		        }
	    		add_core = EGY
            }
			every_province = {
	    	    limit = {
		    	    area = bahari_area
		        }
	    		add_core = EGY
            }
			every_province = {
	    	    limit = {
		    	    area = gulf_of_arabia_area
		        }
	    		add_core = EGY
            }
	        release = EGY
	     	ROOT = {
	        	create_subject = {
                    subject_type = georgian_protectorate
                    subject = EGY
		    	}
            }
	    	EGY = {
	    	     capital_scope = {
		    		 build_to_forcelimit = {
		    	        infantry = 0.6
		    		    cavalry = 0.3
	    			    artillery = 0.1
		    	    }
		        }
		        adopt_reform_progress = ROOT
		        add_historical_friend = root
		    	ROOT = { add_historical_friend = EGY }
	        }
		}
		#######################
		
		add_country_modifier = {
	    	name = innovative_modifier
			duration = 3650
		}
		add_country_modifier = {
    		name = "the_abolish_slavery_act"
			duration = -1
		}
		custom_tooltip = abolished_slavery_act_tooltip
		hidden_effect = {
			every_owned_province = {
				limit = {
					trade_goods = slaves
				}
				change_trade_goods = unknown
				remove_building = tradecompany
				if = {
					limit = { has_province_modifier = slave_entrepot }
					remove_province_modifier = slave_entrepot
				}
			}
		}
		
		hidden_effect = {
	    	every_country = {
		        limit = {
		    	    is_subject_of = GEO
		        }
		        add_country_modifier = {
	             	name = innovative_modifier
		         	duration = 3650
		        }
	        	add_country_modifier = {
    	         	name = "the_abolish_slavery_act"
		        	duration = -1
	        	}
	        	custom_tooltip = abolished_slavery_act_tooltip
	    	    every_owned_province = {
		    	  	limit = {
			         	trade_goods = slaves
				    }
				    change_trade_goods = unknown
			        remove_building = tradecompany
				    if = {
				    	limit = { has_province_modifier = slave_entrepot }
				        remove_province_modifier = slave_entrepot
		        	}
		    	}
			}	
        }
		
		MAM = {
		    change_government = monarchy
			remove_government_reform = mamluk_government
			if = {
			    limit = { religion_group = muslim }
			    adopt_government_reform = iqta
		    }
			else = {
			    adopt_government_reform = autocracy_reform
			}
			if = {
				limit = {
					has_regency = no
				}
				kill_ruler = yes
			}
			if = {
				limit = {
					has_heir = yes
				}
				kill_heir = {}
			}
			if = {
				limit = {
	    			has_consort = yes
				}
				remove_consort = yes
			}
		}		
	}
	
}

#Georgian-Russian Co-operation Pact ("""modeled""" after Polish mission event, because I'm kind of lazy.)
country_event = {
	id = flavor_geo.13
	title = "flavor_geo.EVTNAME13"
	desc = "flavor_geo.EVTDESC13"
	picture = DIPLOMACY_SIGNING_eventPicture
	
	is_triggered_only = yes
	major = yes
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "flavor_geo.EVTOPTA13"
		if = {
		    limit = {
			    AND = { 
				    MOS = { exists = yes }
					RUS = { exists = no }
				}
			}
			MOS = { country_event = { id = flavor_geo.14 days = 7 } }
		}
		else = {
			RUS = { country_event = { id = flavor_geo.14 days = 7} }
		}
	}
}

#Georgian-Russian Co-operation Pact ("""modeled""" after Polish mission event, because I'm kind of lazy.)
country_event = {
	id = flavor_geo.14
	title = "flavor_geo.EVTNAME14"
	desc = "flavor_geo.EVTDESC14"
	picture = DIPLOMACY_SIGNING_eventPicture
	
	is_triggered_only = yes
	major = yes
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = { 
		name = "flavor_geo.EVTOPTA14"
		
		ai_chance = { 
			factor = 1
			modifier = {
				GEO = { diplomatic_ideas = 2 } 
				factor = 1.75
			}
			modifier = { 
				GEO = { influence_ideas = 2 } 
				factor = 1.75
			}
			modifier = { 
				trust = { 
					who = GEO 
					value = 100 
				}
				factor = 1.5 
			}
			modifier = { 
				has_heir = no
				factor = 3
			}
			modifier = { 
				NOT = { stability = 0 }
				factor = 2
			}
			modifier = { 
				has_any_disaster = yes
				factor = 100
			}
		}
		GEO = { create_union = ROOT }
	}
	
	option = { 
		name = "flavor_geo.EVTOPTB14"
		
		ai_chance = { factor = 10 } 
		GEO = {
			add_country_modifier = {
				name = geo_georgian_russian_cooperation
				duration = -1
			}
		}
		ROOT = { 
			add_country_modifier = {
				name = geo_russo_georgian_cooperation
				duration = -1
			}
		}
	}
	
	option = {
		name = "flavor_geo.EVTOPTC14"
		
		ai_chance = { 
		    factor = 1 
			modifier = { 
				ruler_has_personality = malevolent_personality
				factor = 2
			}
			modifier = { 
				ruler_has_personality = babbling_buffoon_personality
				factor = 2
			}
		} 
		remove_historical_friend = GEO
		GEO = { 
			remove_historical_friend = ROOT 
			if = {
			    limit = {
			        RUS = { exists = yes }
			    }
		      	add_casus_belli = {
			    	type = cb_restore_personal_union
			    	months = 300
			    	target = RUS
				}
			} 
			else = {
		      	add_casus_belli = {
			    	type = cb_restore_personal_union
			    	months = 300
			    	target = MOS
				}
			}
		}
	}
}

#Georgian Crusade - Release Jerusalem?
country_event = {
	id = flavor_geo.8
	title = "flavor_geo.EVTNAME8"
	desc = "flavor_geo.EVTDESC8"
	picture = RELIGIOUS_WARS_eventPicture
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "flavor_geo.EVTOPTA8"
		ai_chance = { factor = 0 }
		custom_tooltip = geo_released_jerusalem_as_march
		every_owned_province = {
		    limit = {
			    area = palestine_area
		    }
			add_core = KOJ
        }
		every_owned_province = {
		    limit = {
			    area = trans_jordan_area
		    }
			add_core = KOJ
        }
		every_owned_province = {
		    limit = {
			    area = syria_area
		    }
			add_core = KOJ
        }
		every_owned_province = {
		    limit = {
			    area = syrian_desert_area
		    }
			add_core = KOJ
        }
		every_owned_province = {
		    limit = {
			    area = aleppo_area
		    }
			add_core = KOJ
        }
		every_owned_province = {
		    limit = {
			    area = al_jazira_area
		    }
			add_core = KOJ
        }
	    release = KOJ
	 	ROOT = {
	    	create_subject = {
                subject_type = georgian_protectorate
                subject = KOJ
			}
        }
		KOJ = {
		     capital_scope = {
				 build_to_forcelimit = {
			        infantry = 0.6
				    cavalry = 0.3
				    artillery = 0.1
			    }
		    }
		    change_government = theocracy
			adopt_government_reform = holy_state_reform
		    adopt_reform_progress = ROOT
		    add_historical_friend = root
			ROOT = { add_historical_friend = KOJ }
	    }	
		hidden_effect = {
        	every_known_country = {
	        	limit = {
	     	    	religion_group = christian
	     	    }
	         	add_opinion = {
              		who = ROOT
	        		modifier = geo_jerusalem_under_christians
	        	}
	        }
        	every_known_country = {
	        	limit = {
	        		religion = catholic
	        	}
	         	add_opinion = {
             		who = ROOT
	        		modifier = geo_restored_koj
	        	}
	        }
		}
	}
	option = {
		name = "flavor_geo.EVTOPTB8"
	
    	add_patriarch_authority = 0.15
		379 = {
		    change_religion = orthodox
		}	
		custom_tooltip = geo_conquered_jerusalem
		hidden_effect = {
        	every_known_country = {
	        	limit = {
	     	    	religion_group = christian
	     	    }
	         	add_opinion = {
              		who = ROOT
	        		modifier = geo_jerusalem_under_christians
	        	}
	        }
		}
	}
}

#Giorgi Saakadze - Grand Mouravi
country_event = {
	id = flavor_geo.15
	title = "flavor_geo.EVTNAME15"
	desc = "flavor_geo.EVTDESC15"
	picture = GENERALS_DISCUSSING_eventPicture
	
	fire_only_once = yes

	trigger = {
	    tag = GEO
		AND = {
	    	is_year = 1590
		    NOT = { is_year = 1629 }
		}
	}
	
	mean_time_to_happen = {
		days = 3650
	}
	
	option = { #Lead the armies
		name = "flavor_geo.EVTOPTA15"
		ai_chance = { factor = 33 }
		define_general = {
			name = "Giorgi Saakadze"
			shock = 6
			fire = 3
			manuever = 5
			siege = 1
		}
	}
	
	option = { #An advisor
		name = "flavor_geo.EVTOPTB15"
		ai_chance = { factor = 33 }
		define_advisor = {
	    	type = commandant
			name = "Giorgi Saakadze"
			discount = yes
     		location = 423
			skill = 3
		}
	}
	
	option = { #if a Republic - Make him a ruler
		name = "flavor_geo.EVTOPTC15"
		trigger = {
			government = republic
		}
		ai_chance = { factor = 3333 }
		define_ruler = {
			name = "Giorgi Saakadze"
			ADM = 4
			DIP = 2
			MIL = 6
		}
		if = {
			limit = {
				has_dlc = "Rights of Man" 
			}
			hidden_effect = { add_ruler_personality_ancestor = { key = bold_fighter } }
		}
	}
}

#Reforming the Army - IRL during Heraclius' Reign
country_event = {
	id = flavor_geo.16
	title = "flavor_geo.EVTNAME16"
	desc = "flavor_geo.EVTDESC16"
	picture = GENERALS_DISCUSSING_eventPicture
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = { #Better Militarization
		name = "flavor_geo.EVTOPTA16"
		add_mil_power = 250
		custom_tooltip = geo_access_normal_militarization_tt
		set_country_flag = enable_adv_geo_mil_level_flag
		regenerate_government_mechanics = yes
	}
}

# Reestablishing the protectorate of Trebizond?
country_event = {
	id = flavor_geo.17
	title = flavor_geo.EVTNAME17
	desc = flavor_geo.EVTDESC17
	picture = ORTHODOX_ICON_FLAG_eventPicture
	
	is_triggered_only = yes

	#Ask Trapezuntine Emperor to become our protectorate
	option = {
		name = flavor_geo.EVTOPTA17
		
		custom_tooltip = flavor_geo.17.tt1
		custom_tooltip = flavor_geo.17.WARNINGABOUTWARS
		TRE = {
			country_event = {
				id = flavor_geo.18
			}
		}

		ai_chance = {
			factor = 100
		}
	}
	#We see them as equals
	option = {
		name = flavor_geo.EVTOPTB17
		custom_tooltip = flavor_geo.17.tt2
		TRE = {
			add_historical_friend = ROOT
			ROOT = {
				add_historical_friend = PREV
			}
		}
		add_dip_power = 100

		ai_chance = {
			factor = 25
		}
	}
}

# Georgians send an Envoy
country_event = {
	id = flavor_geo.18
	title = flavor_geo.EVTNAME18
	desc = flavor_geo.EVTDESC18
	picture = DIPLOMACY_eventPicture
	is_triggered_only = yes
	#Kneel before the Russian Tsardom
	option = {
		name = flavor_geo.EVTOPTA18
		tooltip = {
			FROM = {
				create_subject = {
					subject_type = vassal
					who = ROOT
				}
			}
		}
		hidden_effect = {
			FROM = {
				country_event = {
					id = flavor_geo.19
				}
			}
		}

		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				total_development = 100
			}
			modifier = {
				GEO = { diplomatic_ideas = 2 } 
				factor = 100
			}
			modifier = { 
				GEO = { influence_ideas = 2 } 
				factor = 100
			}
			modifier = { 
				trust = { 
					who = GEO 
					value = 100 
				}
				factor = 100
			}
		}
	}
	#Refuse
	option = {
		name = flavor_geo.EVTOPTB18
		FROM = {
			country_event = {
				id = flavor_geo.20
			}
		}

		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { total_development = 100 }
			}
		}
	}
}

# Protectorate of Trebizond - Accepted
country_event = {
	id = flavor_geo.19
	title = flavor_geo.EVTNAME19
	desc = flavor_geo.EVTDESC19
	picture = DIPLOMACY_eventPicture
	is_triggered_only = yes
	#Nice
	option = {
		name = flavor_geo.EVTOPTA19
		create_subject = {
			subject_type = georgian_protectorate
			who = FROM
		}

		ai_chance = {
			factor = 1
		}
	}
}

# Protectorate of Trebizond - Refused
country_event = {country_event = {
	id = flavor_geo.20
	title = flavor_geo.EVTNAME20
	desc = flavor_geo.EVTDESC20
	picture = ACCUSATION_eventPicture
	is_triggered_only = yes
	#oof
	option = {
		name = flavor_geo.EVTOPTA20
		break_alliance = TRE
		break_marriage = TRE
		add_casus_belli = {
		    type = cb_vassalize_mission
			months = 300
			target = TRE
		}
		add_permanent_claim = 330

		ai_chance = {
			factor = 1
		}
	}
}

#Second Council of Ruis-Urbnisi
country_event = {
	id = flavor_geo.21
	title = "flavor_geo.EVTNAME21"
	desc = "flavor_geo.EVTDESC21"
	picture = LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes
	
	fire_only_once = yes

	
	mean_time_to_happen = {
		days = 1
	}
	
	#Adopt the Reforms
	option = {
		name = flavor_geo.EVTOPTA21
		unlock_government_reform = {
			government_reform = decretals_of_the_georgian_orthodox_church_reform
		}
		add_government_reform = decretals_of_the_georgian_orthodox_church_reform
		ai_chance = {
			factor = 1
		}
	}
	
	#This can wait for later
	option = {
		name = flavor_geo.EVTOPTB21
		unlock_government_reform = {
			government_reform = decretals_of_the_georgian_orthodox_church_reform
		}
		change_government_reform_progress = 50
		ai_chance = {
			factor = 0
		}
	}
}

#Revolutionary Event - distant of reference of the Mikava Revolt
country_event = {
	id = flavor_geo.24
	title = "flavor_geo.EVTNAME24"
	desc = "flavor_geo.EVTDESC24"
	picture = REVOLUTION_eventPicture
	
	is_triggered_only = yes
	major = yes
	
	fire_only_once = yes
	
	trigger = {
		tag = GEO

		revolution_event_can_happen_trigger = yes
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "flavor_geo.EVTOPTA24"

		hidden_effect = {
			add_country_modifier = {
				name = just_had_revolution_bringing_someone_to_power_timer
				duration = 2
				hidden = yes
			}
		}
		enact_revolution_effect = yes
		
		#Hey, if Swedes can have Hierta, then we can have Dodashvili by the same Logic.
		define_ruler = {
			name = "Solomon Dodashvili"
			adm = 5
			dip = 5
			mil = 2
		}
		add_ruler_personality = reformist_personality 
		add_ruler_personality = scholar_personality 
		
		add_government_reform = geo_revolutionary_army_reform
	}
}

#####################################
#Various events                     #
#####################################

country_event = { #Fall of Constantinople/Warning about potential destabilization
	id = flavor_geo.6
	title = "flavor_geo.EVTNAME6"
	desc = "flavor_geo.EVTDESC6"
	picture = CHURCH_ESTATE_UPSET_eventPicture
	
	fire_only_once = yes
	
	major = yes
	
	trigger = {
	    tag = GEO
		NOT = { mission_completed = geo_consolidate_georgia }
		151 = {
		    owner = {
			    NOT = { religion_group = christian }
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "flavor_geo.EVTOPTA6"
		custom_tooltip = geo_fall_of_constantinople_destabilizes_georgia
	}
}

country_event = { #Kvarkvare Jaqeli Becomes Ruler of Samtskhe-Liberty Desire increases for Samtskhe
	id = flavor_geo.7
	title = "flavor_geo.EVTNAME7"
	desc = "flavor_geo.EVTDESC7"
	picture = ACCUSATION_eventPicture
	
	major = yes
	
	fire_only_once = yes
	
	trigger = {
	    tag = GEO
		SME = {
		    ai = yes
			is_subject_of = GEO
			has_ruler = "Qvarqvare II"
			dynasty = "Jaqeli"
		}
	}
	
	mean_time_to_happen = {
	    days = 14
	}
	
	option = {
		name = "flavor_geo.EVTOPTA7"
		SME = { add_liberty_desire = 100 }
	}
}

country_event = { #East-West resolution?
	id = flavor_geo.1000
	title = "flavor_geo.EVTNAME12"
	desc = "flavor_geo.EVTDESC12"
	picture = SEJM_eventPicture
	
	major = yes
	
	fire_only_once = yes
	
	trigger = {
	    tag = GEO
		IME = {
		    ai = yes
			has_ruler = "Demetre I"
			dynasty = "Bagrationi"
		}
	}
	
	mean_time_to_happen = {
		months = 24
		modifier = {
			factor = 0.1
			is_year = 1445
		}
	}
	
	option = {
		name = "flavor_geo.EVTOPTA12"
		ai_chance = { factor = 100 }
		
	 	define_ruler = {
		    name = "Demetre I"
            dynasty = "Bagrationi"
            age = 64
            adm = 3
            dip = 4
            mil = 3
            claim = 50
		}
		kill_heir = {}
		inherit = IME
		add_stability = -1
		random_owned_province = {
			spawn_rebels = {
                type = pretender_rebels
                size = 1
                leader = "Giorgi"
	     		leader_dynasty = "Bagrationi"
            }
        }
	}
	
	option = {
		name = "flavor_geo.EVTOPTB12"
		ai_chance = { factor = 0 }
	}
}

country_event = { #East-West resolution after the Death of Demetrius
	id = flavor_geo.1001
	title = "flavor_geo.EVTNAME12ALT"
	desc = "flavor_geo.EVTDESC12ALT"
	picture = SEJM_eventPicture
	
	major = yes
	
	fire_only_once = yes
	
	trigger = {
	    tag = GEO
		IME = {
		    ai = yes
			OR = {
	    		NOT = { has_ruler = "Demetre I" }
		    	NOT = { dynasty = "Bagrationi" }
			}
		}
	}
	
	mean_time_to_happen = {
		days = 7
	}
	
	option = {
		name = "flavor_geo.EVTOPTA12ALT"
		ai_chance = { factor = 100 }

		inherit = IME
		add_stability = 1
	}
}